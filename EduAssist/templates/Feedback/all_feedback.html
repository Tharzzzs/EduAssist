{% include 'include/header.html' %}
{% load static %}
<head>
    <title>All User Feedback</title>
    <link rel="stylesheet" href="{% static 'pos_app/css/feedback.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"> 
</head>

{% block content %}

<div class="container" style="max-width: 1200px;">

    <!-- Top Actions -->
    <div class="top-actions" style="margin-bottom: 25px;">
        <a href="{% url 'dashboard' %}" class="btn-secondary">
            <i class="fa-solid fa-arrow-left"></i> Back to Dashboard
        </a>
    </div>

    <!-- Page Title -->
    <h2>All User Feedback</h2>

    {% if feedbacks %}
        <div class="feedback-cards">
            {% for feedback in feedbacks %}
                <div class="feedback-card">
                    <div class="feedback-header">
                        <strong>{{ feedback.user.username|default:"[Deleted User]" }}</strong>
                        <div class="rating-display">
                            {% for i in star_range %}
                                {% if i <= feedback.rating %}
                                    <i class="fa-solid fa-star rated"></i>
                                {% else %}
                                    <i class="fa-regular fa-star unrated"></i>
                                {% endif %}
                            {% endfor %}
                            <span class="rating-value">({{ feedback.rating }}/5)</span>
                        </div>
                    </div>
                    <div class="feedback-comment">
                        {{ feedback.comment|default:"— No Comment Provided —"|truncatechars:150 }}
                    </div>
                    <div class="feedback-footer">
                        <small>{{ feedback.created_at|date:"Y-m-d H:i" }}</small>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="empty" style="text-align: center; padding: 40px; border: 1px dashed #ced4da; border-radius: 8px;">
            <i class="fa-solid fa-face-frown" style="color: var(--text-color-muted); margin-right: 10px;"></i> 
            No feedback has been submitted to the system yet.
        </p>
    {% endif %}

</div>

{% endblock content %}
